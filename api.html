<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appel via API IPPI</title>
</head>
<body>
    <h1>Appel via API IPPI</h1>

    <!-- Formulaire pour entrer le numéro à appeler -->
  document.getElementById("callForm").addEventListener("submit", function(e) {
  e.preventDefault();
  var phoneNumber = document.getElementById("phone").value;
  var anumber = "oxnya_group"; // ton SIP connecté Zoiper
  var bnumber = phoneNumber; // numéro qu'on veut appeler
  var callLink = "https://api.ippi.com/sip-activity/start-call?login=oxnya_group&apiPassword=cc24NOLHAN*&anumber=" + anumber + "&bnumber=" + bnumber;
  document.getElementById("phone-link").textContent = callLink;

  fetch(callLink)
    .then(response => response.json())
    .then(data => {
      if (data.code === "OK") {
        alert("Appel lancé avec succès !");
      } else {
        alert("Erreur : " + data.data);
      }
    })
    .catch(error => {
      console.error("Erreur réseau :", error);
    });
});
</body>
</html>